{"version":3,"sources":["../../DataStore/MongoDBDataStore.js"],"names":["CONFIG","require","mongoose","Promise","global","ClientAccount","MongoDBDataStore","connect","mongo_url","db","connection","on","console","error","bind","id","account","findOne","err","acc","log","resolve","module","exports"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,WAAR,CAAf;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACAC,SAASC,OAAT,GAAmBC,OAAOD,OAA1B;AACA,IAAIE,gBAAgBJ,QAAQ,yBAAR,CAApB;;IAEMK,gB;AAEF,gCAAa;AAAA;;AACTJ,iBAASK,OAAT,CAAiBP,OAAOQ,SAAxB;AACA,YAAIC,KAAKP,SAASQ,UAAlB;AACAD,WAAGE,EAAH,CAAM,OAAN,EAAeC,QAAQC,KAAR,CAAcC,IAAd,CAAmBF,OAAnB,EAA4B,mBAA5B,CAAf;AACH;;;;uCAEcG,E,EAAG;;AAEb,gBAAIC,UAAUX,cAAcY,OAAd,CAAsB,EAAC,aAAYF,EAAb,EAAtB,EAAwC,UAASG,GAAT,EAAcC,GAAd,EAAmB;AACrE,oBAAGD,GAAH,EACIN,QAAQQ,GAAR,CAAY,0BAAZ,EAAuCF,GAAvC;AACJ,oBAAGC,OAAO,IAAV,EACIhB,QAAQkB,OAAR,CAAgB,IAAhB;AACL,uBAAOF,GAAP;AACH,aANc,CAAd;;AAQA,mBAAOH,OAAP;AACR;;;;;;AAIDM,OAAOC,OAAP,GAAiBjB,gBAAjB","file":"MongoDBDataStore.js","sourcesContent":["const CONFIG = require('../Config');\nvar mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\nvar ClientAccount = require('../models/ClientAccount')\n\nclass MongoDBDataStore{\n\n    constructor(){\n        mongoose.connect(CONFIG.mongo_url);\n        var db = mongoose.connection;\n        db.on('error', console.error.bind(console, 'connection error:'));\n    }\n\n    getAccountById(id){\n\n         var account = ClientAccount.findOne({'client_id':id}, function(err, acc) {\n             if(err)\n                 console.log('Data fetching failed: %s',err);\n             if(acc == null)\n                 Promise.resolve(null);\n            return acc;\n        });\n\n         return account;\n}\n\n}\n\nmodule.exports = MongoDBDataStore;"]}